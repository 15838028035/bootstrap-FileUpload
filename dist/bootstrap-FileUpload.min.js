/*! Bootstrap FileUpload - v0.5.0 - 2016-05-18
* https://github.com/lleblanc42/bootstrap-FileUpload
* Copyright (c) 2016 Luke LeBlanc; Licensed GPL-3.0 */
!function(a,b,c,d){"use strict";function e(){var a=new XMLHttpRequest;return!!(c.FormData&&a&&"upload"in a&&"onprogress"in a.upload)}function f(a){return/((http(s)?|ftp(s)?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/.test(a)}a.fn.bootstrapFileUpload=function(b){var d,g,h,i,j,k,l,m,n,o,p,q,r={url:null,fallbackUrl:null,formMethod:"post",multiFile:!0,multiUpload:!1,inputName:"files",hiddenInput:null,forceFallback:!1,maxSize:5,maxFiles:null,showThumb:!0,thumbWidth:80,thumbHeight:80,fileTypes:{archives:[],audio:[],files:[],images:[],video:[]},debug:!0,onInit:function(){},onFileAdded:function(){},onFileRemoved:function(){},onFileCancel:function(){},onFileProcessing:function(){},onUploadProgress:function(){},onUploadError:function(){},onUploadSuccess:function(){},onUploadComplete:function(){},onUploadReset:function(){}},s=a.extend(r,b||{}),t={},u=0,v={},w=function(b){return d=a("#"+b),v.archives=["zip","7z","gz","gzip","rar","tar"],v.audio=["mp3","wav","wma","wpl","aac","flac","m4a","m4b","m4p","midi","ogg"],v.files=["doc","docx","docm","ods","odt","ott","ods","pdf","ppt","pptm","pptx","pub","rtf","csv","log","txt","xls","xlsm","xlsx"],v.images=["bmp","tif","tiff","gif","jpeg","jpg","png","svg","ico","raw"],v.video=["avi","flv","swf","m4v","mkv","mov","mp4","ogv","wmv"],G(),s.debug!==!0&&s.debug!==!1&&(s.debug=!0),"function"!=typeof a().emulateTransitionEnd?void J("bootstrap"):a("link[href$='font-awesome.css']").length||a("link[href$='font-awesome.min.css']").length||s.showThumb!==!0?null!==s.url&&f(s.url)?"post"!==s.formMethod&&"get"!==s.formMethod?void J("formMethod"):null===s.fallbackUrl||f(s.fallbackUrl)?(e&&s.forceFallback===!1?x():y(),void("function"==typeof s.onInit&&s.onInit.call(this))):void J("fallbackUrl"):void J("url"):void J("fontAwesome")},x=function(){q=new FormData,g=a('<form action="'+s.url+'" method="'+s.formMethod+'" enctype="multipart/form-data"></form>'),h=a('<div class="row fileupload-buttonbar"></div>'),i=a('<div class="col-lg-7"></div>'),j=a('<div class="btn btn-success fileupload-add"><input type="file" '+(s.multiFile===!0?'multiple="multiple"':void 0)+'multiple /><i class="glyphicon glyphicon-plus"></i>&nbsp;Add Files&hellip;</div>'),m=a('<button type="reset" class="btn btn-primary fileupload-reset"><i class="glyphicon glyphicon-repeat"></i>&nbsp;Add More Files&hellip;</button>'),k=a('<button class="btn btn-warning fileupload-start"><i class="glyphicon glyphicon-upload"></i>&nbsp;<span>Start upload</span></button>'),l=a('<button type="reset" class="btn btn-danger fileupload-cancel"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Cancel upload</span></button>'),n=a('<div class="col-lg-5 fileupload-overall-progress"><div class="progress"><div class="progress-bar progress-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-extended">&nbsp;</div></div></div>'),o=a('<div class="row fileupload-overall-status"><div class="col-lg-12"><div class="alert alert-success"><strong>Uploaded Successfully!</strong></div><div class="alert alert-danger"></div></div></div>'),p=a('<table role="presentation" class="table table-striped fileupload-preview"><tbody class="files"></tbody></table>'),i.append(j,m,k,l),h.append(i,n),g.append(h,o),d.append(g,p),j.on("change","input",function(a){z(a)}),m.on("click",function(a){a.preventDefault(),E()}),k.on("click",function(a){a.preventDefault(),B()}),l.on("click",function(){E()}),p.on("click",".fileupload-remove",function(){D(a(this).val())})},y=function(){g=a('<form action="'+(s.fallbackUrl?s.fallbackUrl:s.url)+'" method="'+s.formMethod+'" enctype="multipart/form-data"></form>'),j=a('<div class="input-group"><span class="input-group-btn"><span class="btn btn-success fileupload-fallback-add"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add Files&hellip; <input type="file" name="'+s.inputName+'" '+(s.multiFile===!0?'multiple="multiple"':void 0)+'></span></span><input type="text" class="form-control" readonly></div>'),k=a('<div class="form-group"><button type="submit" class="btn btn-warning fileupload-fallback-start"><i class="glyphicon glyphicon-upload"></i>&nbsp;<span>Start upload</span></button><button type="reset" class="btn btn-primary fileupload-fallback-reset"><i class="glyphicon glyphicon-repeat"></i>&nbsp;Reset</button></div>'),g.append(j,k),s.hiddenInput&&a.each(s.hiddenInput,function(a,b){g.append('<input type="hidden" name="'+a+'" value="'+b+'" />')}),d.append(g),j.on("change",".fileupload-fallback-add input[type=file]",function(){var b,c,d;b=a(this),c=b.get(0).files?b.get(0).files.length:1,d=b.val().replace(/\\/g,"/").replace(/.*\//,""),b.trigger("fileselect",[c,d])}),j.find(".fileupload-fallback-add input[type=file]").on("fileselect",function(b,c,d){var e,f;e=a(this).parents(".input-group").find("input[type=text]"),f=c>1?c+" files selected":d,e.length&&e.val(f)})},z=function(a){var b=a.target.files,e=b.length;s.multiFile===!0&&s.maxFiles&&e>s.maxFiles&&(c.alert("You're trying to upload "+e+" files and only "+s.maxFiles+" files is currently supported! The system will only upload what is supported and you will have to upload again."),e=s.maxFiles),p.detach();for(var f=0;e>f;f++){var g,h,i,j,m,n;if(g="file-"+f,j=b[f],m=j.size/1024/1024,h=j.name.split(".").pop().toLowerCase(),I(h)!==!1)if(i=H(h),m.toFixed(2)>s.maxSize)c.alert('The file size for "'+j.name+'" is too large! Maximum supported file size is '+s.maxSize+"MB and the size of the file is "+m+"MB");else if(t&&F(j)>=0)c.alert('The file "'+j.name+'" is already in queue!');else{t[g]=j,u=++u,k.fadeIn("slow","linear"),l.fadeIn("slow","linear");var o='<div class="progress fileupload-progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div></div><div class="alert alert-success"><strong>Uploaded Successfully!</strong></div><div class="alert alert-danger"></div>';if(s.showThumb===!0){var q=A(j,i,h);n=s.multiUpload===!1?'<tr class="fileupload-previewrow thumb row" id="'+g+'"><td class="col-lg-1">'+q+'</td><td class="col-lg-4">'+j.name+'</td><td class="col-lg-6">'+o+'</td><td class="col-lg-1"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>':'<tr class="fileupload-previewrow thumb row" id="'+g+'"><td class="col-lg-1">'+q+'</td><td class="col-lg-9">'+j.name+'</td><td class="col-lg-2"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>'}else n=s.multiUpload===!1?'<tr class="fileupload-previewrow no-thumb row" id="'+g+'"><td class="col-lg-5">'+j.name+'</td><td class="col-lg-6">'+o+'</td><td class="col-lg-1"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>':'<tr class="fileupload-previewrow no-thumb row" id="'+g+'"><td class="col-lg-10">'+j.name+'</td><td class="col-lg-2"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>';p.append(n)}else c.alert('The file "'+j.name+'" is not a supported filetype!')}d.append(p),p.fadeIn("slow","linear"),"function"==typeof s.onFileAdded&&s.onFileAdded.call(this)},A=function(a,b,c){var d;switch(b){case"archives":d='<i class="fa fa-file-archive-o fa-5x"></i>';break;case"audio":d='<i class="fa fa-file-audio-o fa-5x"></i>';break;case"files":switch(c){case"doc":d='<i class="fa fa-file-word-o fa-5x"></i>';break;case"docx":d='<i class="fa fa-file-word-o fa-5x"></i>';break;case"docm":d='<i class="fa fa-file-word-o fa-5x"></i>';break;case"ppt":d='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pptm":d='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pptx":d='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pdf":d='<i class="fa fa-file-pdf-o fa-5x"></i>';break;case"xls":d='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"csv":d='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"xlsm":d='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"xlsx":d='<i class="fa fa-file-excel-o fa-5x"></i>';break;default:d='<i class="fa fa-file-o fa-5x"></i>'}break;case"images":d='<img src="'+URL.createObjectURL(a)+'" alt="'+a.name+'" width="'+s.thumbWidth+'px" height="'+s.thumbHeight+'px" class="fileupload-previewimg" />';break;case"video":d='<i class="fa fa-file-movie-o fa-5x"></i>'}return d},B=function(){a(".fileupload-add, .fileupload-start, .fileupload-cancel, .fileupload-remove").attr("disabled","disabled"),s.hiddenInput&&a.each(s.hiddenInput,function(a,b){q.append(a,b)}),s.multiUpload===!1?a.each(t,function(b,c){q.append(s.inputName,c),a("#"+b+" .fileupload-progress .progress-bar-striped").fadeIn("slow","linear"),a.ajax({url:s.url,type:s.formMethod,data:q,cache:!1,contentType:!1,processData:!1,accepts:"json",success:function(c,d,e){var f=JSON.parse(c);f.error?(a("#"+b+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+b+" .fileupload-progress .progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),a("#"+b+" .alert-danger").fadeIn("slow","linear").html("<strong>Error:</strong><br />"+f.error)):(a("#"+b+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+b+" .fileupload-progress .progress-bar-success").attr("aria-valuenow",100).css("width","100%"),a("#"+b+" .alert-success").fadeIn("slow","linear")),"function"==typeof s.onUploadSuccess&&s.onUploadSuccess.call(this)},error:function(c,d,e){a("#"+b+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+b+" .fileupload-progress .progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),a("#"+b+" .alert-danger").fadeIn("slow","linear").html(d+": "+e.message),"function"==typeof s.onUploadError&&s.onUploadError.call(this)},xhr:function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(c){if(c.lengthComputable){var d=c.loaded/c.total;a("#"+b+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",Math.round(100*d)).css("width",Math.round(100*d)+"%")}}),c}}),"function"==typeof s.onUploadProgress&&s.onUploadProgress.call(this)}):(n.fadeIn("slow","linear"),a.each(t,function(a,b){q.append(s.inputName+"[]",b)}),a.ajax({url:s.url,type:s.formMethod,data:q,cache:!1,contentType:!1,processData:!1,accepts:"json",success:function(a,b,c){var d=JSON.parse(a);d.error?(n.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),n.find(".progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),o.fadeIn("slow","linear"),o.find(".alert-danger").fadeIn("slow","linear").html("<strong>Error:</strong><br />"+d.error)):(n.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),n.find(".progress-bar-success").attr("aria-valuenow",100).css("width","100%"),o.fadeIn("slow","linear"),o.find(".alert-success").fadeIn("slow","linear")),"function"==typeof s.onUploadSuccess&&s.onUploadSuccess.call(this)},error:function(a,b,c){n.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),n.find(".progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),o.fadeIn("slow","linear"),o.find(".alert-danger").fadeIn("slow","linear").html(b+": "+c.message),"function"==typeof s.onUploadError&&s.onUploadError.call(this)},xhr:function(){var b=a.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(a){if(a.lengthComputable){var b=a.loaded/a.total;n.find(".progress-bar-striped").attr("aria-valuenow",Math.round(100*b)).css("width",Math.round(100*b)+"%"),"function"==typeof s.onUploadProgress&&s.onUploadProgress.call(this)}}),b}})),j.fadeOut("slow","linear"),k.fadeOut("slow","linear"),l.fadeOut("slow","linear"),m.delay(600).fadeIn("slow","linear"),"function"==typeof s.onUploadComplete&&s.onUploadComplete.call(this)},C=function(){p.find("tbody").empty(),g[0].reset(),t={},u=0},D=function(b){1>=u?E():(a("#"+b).fadeOut("slow","linear"),a("#"+b+" .alert").fadeOut("slow","linear"),a("#"+b).remove(),delete t[b],u=--u),"function"==typeof s.onFileRemoved&&s.onFileRemoved.call(this)},E=function(){C(),p.fadeOut("slow","linear"),k.fadeOut("slow","linear"),l.fadeOut("slow","linear"),a(".fileupload-previewrow .alert").fadeOut("slow","linear"),a(".fileupload-add, .fileupload-start, .fileupload-cancel").removeAttr("disabled"),a(".fileupload-add").delay(800).fadeIn("slow","linear"),n.find(".progress-bar-success").attr("aria-valuenow",0).css("width","0%"),n.fadeOut("slow","linear"),m.fadeOut("slow","linear"),"function"==typeof s.onUploadReset&&s.onUploadReset.call(this)},F=function(b){var c=[];return a.each(t,function(a,b){c.push(b.name)}),a.inArray(b.name,c)},G=function(){a.each(s.fileTypes,function(b,c){a.isNumeric(b)?s.fileTypes[c]=v[c]:!a.isNumeric(b)&&a.isEmptyObject(c)&&(s.fileTypes[b]=v[b])})},H=function(b){var c;return a.each(s.fileTypes,function(d,e){return a.inArray(b,e)>=0?(c=d,!1):void 0}),c},I=function(b){var c=!1;return a.each(s.fileTypes,function(d,e){return a.inArray(b,e)>=0?(c=!0,!1):void 0}),c},J=function(b){var e,f=a('<div class="alert alert-danger" role="alert"></div>');switch(b){case"fontAwesome":e="The Font Awesome CSS is not available within the head of the website and is a required unless the option showThumb is set to false.";break;case"url":e="The URL provided in the configuration is not a valid URL.";break;case"fallbackUrl":e="The Fallback URL provided in the configuration is not a valid URL.";break;case"formMethod":e="The Form Method provided in the configuration is not a valid, please choose either get or post in the configuration.";break;case"bootstrap":e="The Twitter Bootstrap API is not available on the current page. Please check to make sure all the dependencies are in place.";break;default:e="An unknown error occured."}s.debug===!1&&c.console&&c.console.error?c.console.error(e):s.debug===!0&&(f.append(e),d.append(f))};return this.each(function(){w(this.id)})}}(jQuery,document,window);